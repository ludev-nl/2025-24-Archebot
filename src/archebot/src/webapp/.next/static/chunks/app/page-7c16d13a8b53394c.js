(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{736:(e,t,s)=>{Promise.resolve().then(s.bind(s,4558))},2488:()=>{},4558:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(8089),r=s(13),n=s(1664),o=s(5601),i=s(8428),d=s(9242),l=s(3194);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function h(e){let{className:t,variant:s,size:r,asChild:n=!1,...i}=e,h=n?o.DX:"button";return(0,a.jsx)(h,{"data-slot":"button",className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,d.$)(t))}(c({variant:s,size:r,className:t})),...i})}s(6080).config();let u="http://145.118.192.32:5000",x=(0,n.default)(()=>Promise.all([s.e(211),s.e(550),s.e(28),s.e(519)]).then(s.bind(s,2519)),{loadableGenerated:{webpack:()=>[2519]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"h-[500px] w-full flex items-center justify-center bg-muted",children:(0,a.jsx)("p",{children:"Loading map..."})})});function m(){let[e,t]=(0,r.useState)({southWest:null,northEast:null,southEast:null,northWest:null}),[s,n]=(0,r.useState)([]);(0,r.useEffect)(()=>{let t=e.northEast&&e.southWest&&e.northWest&&e.southEast;console.log("Box coordinates:",e),t&&fetch("".concat(u,"/box-coordinates"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{console.log("Server response:",e),n(e.coordinates)}).catch(t=>{console.log(JSON.stringify(e)),console.error("Failed to send box coordinates:",t)})},[e]);let[o,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=()=>{fetch("".concat(u,"/shards")).then(e=>e.json()).then(e=>{let t=e.map(e=>({lat:e.latitude,lng:e.longitude,image:e.photo||null}));i(t),console.log("Fetched shards:",t)}).catch(e=>{console.error("Failed to fetch shards:",e)})};e();let t=setInterval(e,1e4);return()=>clearInterval(t)},[]),(0,a.jsxs)("main",{className:"container mx-auto py-8 px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:" Geographic map"}),(0,a.jsx)("p",{className:"mb-4 text-muted-foreground",children:"Draw a rectangle on the map to get the latitude and longitude coordinates of the box and start the robot."}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-header",children:[(0,a.jsx)("h2",{className:"card-title",children:"Interactive Map"}),(0,a.jsx)("p",{className:"card-description",children:"Click the rectangle icon in the top left of the map, then draw a box by clicking and dragging."})]}),(0,a.jsx)("div",{className:"card-content",children:(0,a.jsx)("div",{className:"h-[600px] w-full rounded-md overflow-hidden border",children:(0,a.jsx)(x,{onBoxChange:t,path:s,shards:o})})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-header",children:[(0,a.jsx)("h2",{className:"card-title",children:"Box Coordinates"}),(0,a.jsx)("p",{className:"card-description",children:"The coordinates of your selected area will appear here, you can start the robot by clicking the start button"})]}),(0,a.jsx)("div",{className:"card-content",children:e.southWest&&e.northEast&&e.southEast&&e.northWest?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"text-left mt-6",children:(0,a.jsx)(h,{variant:"outline",onClick:()=>{if(!(e.northEast&&e.southWest&&e.northWest&&e.southEast)){alert("Please draw a box on the map first.");return}fetch("".concat(u,"/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"start_clicked"})}).then(e=>e.json()).then(e=>{console.log("Start response:",e)}).catch(e=>{console.error("Failed to send start event:",e)})},children:"Start"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-1",children:"Southwest Corner:"}),(0,a.jsxs)("p",{className:"text-sm",children:["Latitude: ",e.southWest.lat.toFixed(6)]}),(0,a.jsxs)("p",{className:"text-sm",children:["Longitude: ",e.southWest.lng.toFixed(6)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-1",children:"Northeast Corner:"}),(0,a.jsxs)("p",{className:"text-sm",children:["Latitude: ",e.northEast.lat.toFixed(6)]}),(0,a.jsxs)("p",{className:"text-sm",children:["Longitude: ",e.northEast.lng.toFixed(6)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-1",children:"Southeast Corner:"}),(0,a.jsxs)("p",{className:"text-sm",children:["Latitude: ",e.southEast.lat.toFixed(6)]}),(0,a.jsxs)("p",{className:"text-sm",children:["Longitude: ",e.southEast.lng.toFixed(6)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-1",children:"Northwest Corner:"}),(0,a.jsxs)("p",{className:"text-sm",children:["Latitude: ",e.northWest.lat.toFixed(6)]}),(0,a.jsxs)("p",{className:"text-sm",children:["Longitude: ",e.northWest.lng.toFixed(6)]})]})]}):(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{children:"Draw a box on the map to see coordinates"})})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[163,141,14,330,358],()=>t(736)),_N_E=e.O()}]);